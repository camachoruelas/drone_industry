{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/app/App.html",
    "../src/app/components/Loading.html"
  ],
  "sourcesContent": [
    "<svelte:head>\n    <title>{$copy.title}</title>\n</svelte:head>\n<div class=\"app\">\n    <main>\n    {#if isIterableNotEmpty($allCompanies)}\n    <div class=\"map\">\n        <MapBoxGLDots\n            {accessToken}\n            {colorScale}\n            {getLngLat}\n            getItemID={getID}\n            items={$companies}\n            keys={$allEntityTypes}\n            radiusMax=18\n            radiusMin=0.25\n            {styleURL}\n        />\n    </div>\n    <div class=\"barchart\">\n        <BarChart\n            {colorScale}\n            items={barItems}\n            on:toggle=\"$fire('toggle:entityType', event.key)\"\n            selectedKeys={$entityTypes}\n            title=\"Entity types\"\n        />\n    </div>\n    {:else}\n    <Loading />\n    {/if}\n    </main>\n\n    {#if withNestaFooter}\n    <footer>\n        <NestaFooter baseURL=\"https://www.nesta.org.uk\"/>\n    </footer>\n    {/if}\n</div>\n\n<script>\n    import _ from \"lamb\";\n\n    import * as d3 from \"@vendor/d3\";\n\n    import {\n        keysToKeyedZeroes,\n        pairToKeyValueObject,\n    } from \"@utils/arrayUtils\";\n    import {\n        isIterableNotEmpty,\n    } from \"@utils/iterableUtils\";\n    import {objectToKeyValueArray} from \"@utils/objUtils\";\n    import {getID, getLngLat} from \"@utils/companies\";\n\n    import {\n        MAPBOXGL_ACCESSTOKEN,\n        MAPBOXGL_STYLEURL,\n    } from \"./consts\";\n\n    export default {\n        data () {\n            return {\n                accessToken: MAPBOXGL_ACCESSTOKEN,\n                styleURL: MAPBOXGL_STYLEURL,\n                getLngLat,\n                getID\n            }\n        },\n        computed: {\n            // barItems: [\n            //     {key: \"Technology Developer\", value: 2},\n            //     {key: \"Drone-powered services\", value: 12},\n            //     {key: \"Services to drone operators / industry\", value: 5},\n            //     {key: \"Academic / Research Institution\", value: 15},\n            //     {key: \"Other drone-related entitiy\", value: 35},\n            // ],\n            barItems: ({$allCompanies, $allEntityTypes}) => {\n                const keysOccourrences = _.reduce(\n                    $allCompanies,\n                    (acc, item) => {\n                        _.forEach($allEntityTypes, key => {\n                            if (_.getIn(item, key)) {\n                                acc[key] += 1;\n                            }\n                        });\n\n                        return acc;\n                    },\n                    keysToKeyedZeroes($allEntityTypes)\n                );\n\n                return objectToKeyValueArray(keysOccourrences);\n            },\n            colorScale: ({$allEntityTypes}) =>\n                d3.scaleOrdinal()\n                .domain($allEntityTypes)\n                .range(d3.schemeSet1)\n        },\n\n        components: {\n            BarChart: \"../../../BarChart\",\n            Loading: \"./components/Loading.html\",\n            MapBoxGLDots: \"../../../MapBoxGLDots\",\n            NestaFooter: \"./components/NestaFooter/NestaFooter.html\"\n        },\n\n        onstate ({changed, current, previous}) {\n            console.log(\"app:onstate\", changed, current, previous);\n        },\n        oncreate () {\n            console.log(\"app:oncreate\", this.get());\n        },\n\n        methods: {\n            toggleEntityType (entityType) {\n                this.store.fire(\"toggle:entityType\", entityType);\n            }\n        },\n        helpers: {\n            isIterableNotEmpty\n        }\n    }\n</script>\n\n<style>\n    .app {\n        width: 100%;\n        height: 100%;\n        position: relative;\n\n        display: flex;\n        flex-direction: column;\n    }\n\n    main {\n        flex: 1;\n        width: 100%;\n        height: calc(100% - 180px);\n        /* 176 + 3 px (border), also good for mobile so we have some room */\n        /* for dragging up but the footer won't take the whole screen */\n    }\n\n    .map {\n        width: 100%;\n        height: 100%;\n    }\n\n    footer {\n        flex: 0 0 180px;\n    }\n\n    .barchart {\n        width: 300px;\n        position: absolute;\n        top: 0;\n    \tright: 0;\n        margin-right: 1em;\n        margin-top: 1em;\n    }\n</style>\n",
    "<div class=\"loading\">\n    <p>Loading...</p>\n</div>\n\n<style>\n    .loading {\n        width: 100%;\n    \theight: 100%;\n\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    p {\n        font-size: 32px;\n    }\n</style>\n"
  ],
  "names": [],
  "mappings": "AA8HI,IAAI,eAAC,CAAC,AACF,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,QAAQ,CAElB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,AAC1B,CAAC,AAED,IAAI,eAAC,CAAC,AACF,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,AAG9B,CAAC,AAED,IAAI,eAAC,CAAC,AACF,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,MAAM,eAAC,CAAC,AACJ,IAAI,CAAE,CAAC,CAAC,CAAC,CAAC,KAAK,AACnB,CAAC,AAED,SAAS,eAAC,CAAC,AACP,KAAK,CAAE,KAAK,CACZ,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACT,KAAK,CAAE,CAAC,CACL,YAAY,CAAE,GAAG,CACjB,UAAU,CAAE,GAAG,AACnB,CAAC;AC1JD,QAAQ,cAAC,CAAC,AACN,KAAK,CAAE,IAAI,CACd,MAAM,CAAE,IAAI,CAET,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AAC3B,CAAC,AAED,CAAC,cAAC,CAAC,AACC,SAAS,CAAE,IAAI,AACnB,CAAC"
}